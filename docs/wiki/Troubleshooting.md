# トラブルシューティング

## 起動時の問題

### アプリが起動しない

**症状**: `python main.py` を実行してもウィンドウが表示されない

**解決策**:
1. Pythonのバージョンを確認（3.10以上が必要）
   ```bash
   python --version
   ```
2. 依存ライブラリを再インストール
   ```bash
   pip install -r requirements.txt
   ```
3. エラーメッセージを確認
   ```bash
   python main.py 2>&1
   ```

### ModuleNotFoundError

**症状**: `ModuleNotFoundError: No module named 'xxx'`

**解決策**:
```bash
pip install -r requirements.txt
```

---

## Twitch接続の問題

### 認証に失敗する

**症状**: トークン認証ボタンを押してもエラーになる

**解決策**:
1. Client IDが正しく入力されているか確認
2. リダイレクトURLが `http://localhost:8787/redirect.html` に設定されているか確認
3. ファイアウォールでポート8787が許可されているか確認

### BOTがチャンネルに接続しない

**症状**: BOT起動後、チャットが表示されない

**解決策**:
1. チャンネル名が正しいか確認（大文字/小文字は区別しない）
2. トークンが有効か確認（再認証を試す）
3. ログファイルでエラーを確認

---

## 翻訳の問題

### 翻訳されない

**症状**: チャットは表示されるが翻訳されない

**解決策**:
1. 「チャット翻訳」トグルがオンになっているか確認
2. DeepL API Keyが正しく設定されているか確認
3. 翻訳フィルターに該当していないか確認
4. DeepL APIの使用量上限に達していないか確認

### 翻訳が遅い

**症状**: 翻訳に数秒かかる

**原因**: DeepL APIのレート制限に達している可能性

**解決策**:
- Free版は制限が厳しいため、間隔を空けて使用
- Pro版へのアップグレードを検討

---

## VOICEVOX の問題

### 接続できない

**症状**: 「VOICEVOX に接続できません」というエラー

**解決策**:
1. VOICEVOX Engineが起動しているか確認
2. 設定パネルで「接続テスト」を実行
3. ポート50021がファイアウォールで許可されているか確認
4. VOICEVOXのパスが正しく設定されているか確認

### 読み上げられない

**症状**: TTSがオンでも音声が出ない

**解決策**:
1. PCの音声出力デバイスを確認
2. 音量がミュートになっていないか確認
3. pyttsx3にフォールバックしているか確認（ログを参照）

### 特定の文字が読めない

**症状**: 漢字が変な読み方になる

**解決策**:
- 読み上げ辞書に登録
- 設定パネル → 辞書 → 読み上げ辞書

---

## 音声認識の問題

### マイクが認識されない

**症状**: マイク選択に何も表示されない

**解決策**:
1. マイクがPCに接続されているか確認
2. OSのマイク設定を確認
3. アプリを再起動

### 音声認識が動作しない

**症状**: マイクに話しても反応しない

**解決策**:
1. 正しいマイクが選択されているか確認
2. Gladia API Keyが設定されているか確認
3. Gladia使用量が10時間に達していないか確認
4. Google SRに切り替えて試す

---

## イベント効果音の問題

### 効果音が再生されない

**症状**: イベント発生時に音が出ない

**解決策**:
1. 効果音ファイルのパスが正しいか確認
2. ファイル形式が対応形式（MP3, WAV, OGG）か確認
3. ボリュームが0になっていないか確認
4. 左サイドバーの再生ボタンでテスト

---

## その他の問題

### ログファイルが見つからない

**場所**: `dist/logs/bot_YYYY-MM-DD.log`

フォルダが存在しない場合、初回起動時に自動作成されます。

### 設定がリセットされる

**原因**: `config.json` が破損している可能性

**解決策**:
1. `config.json` をバックアップ
2. `config.json` を削除して再起動
3. 再設定

### メモリ使用量が増え続ける

**解決策**:
1. 長時間実行後は再起動を推奨
2. ログレベルをINFO以上に設定
3. 不要な機能をオフに

---

## サポート

解決しない場合は、[GitHub Issues](https://github.com/yukihina1587/kototsuna-bot/issues)で報告してください。

報告時に含めると良い情報:
- OSとPythonのバージョン
- エラーメッセージ（ログファイル）
- 再現手順
