# Twitch翻訳BOT (DeepL版)

Twitchのチャットメッセージをリアルタイムで翻訳し、チャットに投稿するBOTです。DeepL APIを利用しています。

## 主な機能

-   指定したTwitchチャンネルのチャットを監視
-   日本語⇔英語の双方向翻訳
-   **音声翻訳（マイク入力）**: マイクに向かって喋った内容を翻訳
-   **チャット読み上げ（TTS）**: 日本語のチャットメッセージを音声で読み上げ（VOICEVOX利用時は冥鳴ひまりの声、フォールバック時はpyttsx3）
-   GUIによる簡単な操作

## 必要なもの

-   Python 3.6以上
-   Twitchアカウント
-   DeepL APIキー (Free版またはPro版)
-   マイク（音声翻訳機能を使用する場合）
-   VOICEVOX Engine（チャット読み上げで高品質な音声を使用する場合、オプション）

## セットアップ手順

### 1. ライブラリのインストール

このプロジェクトに必要なPythonライブラリをインストールします。

```bash
pip install -r requirements.txt
```

### 2. Twitchアプリケーションの登録

BOTとしてTwitchに接続するには、Twitchアプリケーションの登録とクライアントIDの取得が必要です。

1.  [Twitch Developers](https://dev.twitch.tv/console)にアクセスし、お使いのTwitchアカウントでログインします。
2.  「アプリケーション」タブを開き、「アプリケーションを登録」をクリックします。
3.  以下の情報を入力します。
    -   **名前**: 任意のアプリケーション名（例: `MyTranslateBot`）
    -   **OAuthリダイレクトURL**: `http://localhost:8787/redirect.html`
    -   **カテゴリ**: `チャットボット`
4.  「作成」をクリックすると、アプリケーションが登録され、**クライアントID**が発行されます。このIDを後で使います。

### 3. DeepL APIキーの取得

1.  [DeepL公式サイト](https://www.deepl.com/pro-api)にアクセスし、APIキーを取得します。Free版でも動作します。

### 4. VOICEVOX Engineのインストール（オプション）

チャット読み上げで高品質な音声を使用する場合は、VOICEVOX Engineのインストールを推奨します。

1.  [VOICEVOX公式サイト](https://voicevox.hiroshiba.jp/)から、VOICEVOX Engineをダウンロードします。
2.  インストール後、VOICEVOX Engineを起動します（デフォルトでは `http://localhost:50021` で起動します）。
3.  冥鳴ひまり（Speaker ID: 14）の音声モデルがインストールされていることを確認してください。

**フォールバック機能**: VOICEVOX Engineが起動していない場合、自動的にpyttsx3（システムのTTSエンジン）にフォールバックします。この場合、音声品質は劣りますが、VOICEVOX無しでも読み上げ機能を使用できます。

### 5. 環境変数の設定

プロジェクトのルートディレクトリに `.env` という名前のファイルを作成し、以下の内容を記述します。

```.env
TWITCH_CLIENT_ID="ここにTwitchアプリケーションのクライアントIDを貼り付け"
DEEPL_API_KEY="ここにDeepLのAPIキーを貼り付け"
```

### 6. 実行

以下のコマンドでGUIアプリケーションを起動します。

```bash
python main.py
```

## 使い方

1.  **チャンネル名**: 翻訳したいTwitchチャンネルの名前を入力します。
2.  **翻訳モード**: 翻訳の方向を選択します（自動 / 英→日 / 日→英）。
3.  **音声翻訳機能（マイク）**: マイク入力を翻訳する機能のオン/オフを切り替えます。
4.  **チャット読み上げ（VOICEVOX/pyttsx3）**: 日本語のチャットメッセージを読み上げる機能のオン/オフを切り替えます。VOICEVOX Engineが起動している場合は冥鳴ひまりの声で、それ以外の場合はpyttsx3で読み上げます。
5.  **① トークン認証**: ボタンをクリックするとブラウザが開き、Twitchの認証画面が表示されます。「許可」をクリックすると、トークンが取得されます。
6.  **② BOT起動**: ボタンをクリックすると、BOTが指定されたチャンネルのチャットに接続します。
7.  **③ BOT停止**: BOTの動作を停止します。